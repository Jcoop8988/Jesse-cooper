$rz-timeline-item-gap: 0 !default;
$rz-timeline-item-padding: 0.5rem !default;
$rz-timeline-axis-size: 4rem !default;
$rz-timeline-point-size: 1rem !default;
$rz-timeline-point-border: 3px solid var(--rz-base-background-color) !default;
$rz-timeline-point-border-radius: calc(var(--rz-border-radius) * 12) !default;
$rz-timeline-point-background-color: var(--rz-base-300) !default;
$rz-timeline-point-color: var(--rz-base-700) !default;
$rz-timeline-line-color: var(--rz-base-300) !default;
$rz-timeline-line-width: 0.125rem !default;

// Timeline CSS variables

:root {
  --rz-timeline-item-gap: #{$rz-timeline-item-gap};
  --rz-timeline-item-padding: #{$rz-timeline-item-padding};
  --rz-timeline-axis-size: #{$rz-timeline-axis-size};
  --rz-timeline-point-size: #{$rz-timeline-point-size};
  --rz-timeline-point-border: #{$rz-timeline-point-border};
  --rz-timeline-point-border-radius: #{$rz-timeline-point-border-radius};
  --rz-timeline-point-background-color: #{$rz-timeline-point-background-color};
  --rz-timeline-point-color: #{$rz-timeline-point-color};
  --rz-timeline-line-color: #{$rz-timeline-line-color};
  --rz-timeline-line-width: #{$rz-timeline-line-width};
}

$timeline-point-sizes: () !default;
$timeline-point-sizes: map-merge(
  (
    lg: (
      size: calc(var(--rz-timeline-point-size) * 3),
      font-size: 2rem
    ),
    md: (
      size: calc(var(--rz-timeline-point-size) * 1.5),
      font-size: 1.25rem
    ),
    sm: (
      size: var(--rz-timeline-point-size),
      font-size: 0.75rem
    ),
    xs: (
      size: calc(var(--rz-timeline-point-size) * 0.75),
      font-size: 0.5rem
    )
  ),
  $timeline-point-sizes
);

.rz-timeline-item {
  gap: var(--rz-timeline-item-gap);;
  padding: var(--rz-timeline-item-padding);
  position: relative;

  &:before {
    content: '';
    position: absolute;
    background-color: var(--rz-timeline-line-color);
  }

  .rz-flex-column &:before {
    top: 0;
    bottom: 0;
    left: calc(50% - (var(--rz-timeline-line-width) / 2));
    right: auto;
    width: var(--rz-timeline-line-width);
  }

  .rz-flex-column &:last-child:before {
    bottom: calc(50% - (var(--rz-timeline-line-width) / 2));
    border-bottom-left-radius: var(--rz-timeline-line-width);
    border-bottom-right-radius: var(--rz-timeline-line-width);
  }

  .rz-flex-column &:first-child:before {
    top: calc(50% - (var(--rz-timeline-line-width) / 2));
    border-top-left-radius: var(--rz-timeline-line-width);
    border-top-right-radius: var(--rz-timeline-line-width);
  }

  .rz-flex-row &:before {
    top: calc(50% - (var(--rz-timeline-line-width) / 2));
    bottom: auto;
    left: 0;
    right: 0;
    height: var(--rz-timeline-line-width);
  }

  .rz-flex-row &:last-child:before {
    right: 50%;
  }

  .rz-flex-row &:first-child:before {
    left: 50%;
  }

  .rz-timeline-content-start,
  .rz-timeline-content-end {
    flex: 1;
  }

}

.rz-timeline-axis {
  position: relative;
  flex: 0 1 var(--rz-timeline-axis-size);

  .rz-flex-row > & {
    width: var(--rz-timeline-axis-size);
  }

  .rz-flex-column > & {
    height: var(--rz-timeline-axis-size);
  }
}

.rz-timeline-point {
  position: relative;
  display: flex;
  align-items: center;
  justify-content: center;
  height: var(--rz-timeline-point-size);
  width: var(--rz-timeline-point-size);
  border: var(--rz-timeline-point-border);
  border-radius: var(--rz-timeline-point-border-radius);
  background-color: var(--rz-timeline-point-background-color);
  color: var(--rz-timeline-point-color);
}

.rz-timeline-point-outlined {
  background-color: var(--rz-base-background-color);
  color: var(--rz-timeline-point-color);
  border-color: var(--rz-timeline-point-background-color);
}

.rz-timeline-point-flat {
  border: 0;
}

.rz-timeline-point-text {
  background-color: var(--rz-base-background-color);
  color: var(--rz-timeline-point-color);
  border: 0;
}

@each $style, $rule in $severity-styles-map {
  .rz-timeline-point-#{$style} {
    background-color: map-get($rule, background-color);
    color: map-get($rule, color);
  }

  .rz-timeline-point-outlined.rz-timeline-point-#{$style} {
    background-color: var(--rz-base-background-color);
    color: map-get($rule, background-color);
    border-color: map-get($rule, background-color);
  }
  .rz-timeline-point-text.rz-timeline-point-#{$style} {
    background-color: var(--rz-base-background-color);
    color: map-get($rule, background-color);
  }
}

@each $size, $timeline-point in $timeline-point-sizes {
  .rz-timeline-point-#{$size} {
    width: map-get($timeline-point, size);
    height: map-get($timeline-point, size);
    flex: 0 1 map-get($timeline-point, size);

    .rzi {
      font-size: map-get($timeline-point, font-size);
    }
  }
}

